cluster:
  name: dev
  domain: dev.redhat.com
  fqdn: dev.redhat.com
  address: "https://kubernetes.default.svc"
  environment: dev
  datacenter: europe
  region: eu
  registry: quay-dev.io

ops_namespace: &ops "cluster-ops"

namespaces:
- name: *ops
  labels:
    argocd.argoproj.io/managed-by: *ops
  annotations:
    "helm.sh/resource-policy": keep # Never delete the cluster-ops namespace

gitops-operator:
  enabled: false
  # Since this is designed to be run before the cluster knows anything about the argocd CR, we need to use helm hooks to control the ordering
  # This means that the cluster argocd resource is deployed as a helm hook rather than a managed resource
  # This has the side-effect that every time you run "helm upgrade" argocd will be deleted and recreated
  # It should not affect the applications
  ignoreHelmHooks: false
  name: argocd
  teamInstancesAreClusterScoped: true
  operator:
    channel: gitops-1.7
    disableDefaultArgoCD: true
  namespaces:
  - *ops
  argocd_cr:
    version: v2.5.4
    image: marketaxess-ptop-docker-preprod-virtual.jfrog.io/argoproj/argocd
    ha:
      enabled: false
    notifications:
      enabled: false
      resources:
        limits:
          cpu: 500m
          memory: 256Mi
        requests:
          cpu: 250m
          memory: 128Mi
    initialRepositories: |
      - name: ubiquitous-journey
        type: git
        url: ssh://git@bitbucket.vip.marketaxess.com:7999/ptop/ubiquitous-journey.git
      - name: helm-charts
        type: git
        url: ssh://git@bitbucket.vip.marketaxess.com:7999/ptop/helm-charts.git
      - name: redhat-cop
        type: helm
        url: https://redhat-cop.github.io/helm-charts
      - name: ptop-helm-preprod-virtual
        type: helm
        url: https://marketaxess.jfrog.io/artifactory/ptop-helm-preprod-virtual/
    initialSSHKnownHosts:
      keys: |
        [bitbucket.vip.marketaxess.com]:7999 ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDID3q4Pg0sFT8G6jxOD8oBGM0rkpSVKi8IC92v7bkBD3wQjyyZ0IoYVaLNDYmqQ1QLWdbOZ8HduDlOIQoXNC8xvmaz9Wv7ELhYtErWY4eYQC9Kq/PxsebgOYCfuRDJ2tFHrYzs9Ro82TxQAmNV2BPFysNB8Vz5PWnSXtmHat6vcCoZFtQxWxYrM39Vy9gA3NRNjG1uP9yxK/tgK8dc7cy0bz/04jEqjVJcRgY5EpFr9PBVhJMJ6kWAQsJGAwBkKEW6Py/QTTson+tqkqoPaSQFo57qrAh+2QSCrpvMql2HAMKb1eE7zTVnZJ4jpaDQfdMJTLCOhj8YronUNPyMwVa3
    repositoryCredentials: |
      - url: ssh://git@bitbucket.vip.marketaxess.com:7999
        type: git
        sshPrivateKeySecret:
          key: ssh-privatekey
          name: bitbucket-ssh-creds
        usernameSecret:
          key: username
          name: bitbucket-ssh-creds
      - url: https://marketaxess.jfrog.io/artifactory/
        type: helm
        passwordSecret:
          key: password
          name: artifactory-preprod-ro
        usernameSecret:
          key: username
          name: artifactory-preprod-ro
    server:
      route:
        enabled: true
        tls:
          termination: reencrypt
      resources:
        limits:
          cpu: 500m
          memory: 256Mi
        requests:
          cpu: 125m
          memory: 128Mi
    applicationSet:
      resources:
        limits:
          cpu: '2'
          memory: 1Gi
        requests:
          cpu: 250m
          memory: 512Mi
    repo:
      resources:
        limits:
          cpu: '1'
          memory: 800Mi
        requests:
          cpu: 250m
          memory: 256Mi
    sso:
      dex:
        openShiftOAuth: true
        resources:
          limits:
            cpu: 500m
            memory: 256Mi
          requests:
            cpu: 250m
            memory: 128Mi
      provider: dex
    redis:
      resources:
        limits:
          cpu: 500m
          memory: 256Mi
        requests:
          cpu: 250m
          memory: 128Mi
    controller:
      resources:
        limits:
          cpu: '2'
          memory: 2Gi
        requests:
          cpu: 250m
          memory: 1Gi